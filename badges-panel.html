<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colección de Badges - PLAYTEST</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0D1B2A 0%, #1B263B 50%, #2D3748 100%);
            min-height: 100vh;
            color: #E0E1DD;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4);
            background-size: 300% 300%;
            animation: gradient 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .collection-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            opacity: 0.7;
        }

        .completion-ring {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
        }

        .completion-ring svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .completion-ring .bg-circle {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 8;
        }

        .completion-ring .progress-circle {
            fill: none;
            stroke: #4ECDC4;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 0.5s ease;
        }

        .completion-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
        }

        .filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #E0E1DD;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn.active {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .filter-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .badge-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .badge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .badge-card.earned {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.3);
        }

        .badge-card.earned::before {
            content: '✓';
            position: absolute;
            top: 15px;
            right: 15px;
            background: #4ECDC4;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .badge-card.locked {
            opacity: 0.5;
            filter: grayscale(70%);
        }

        .badge-card.locked::before {
            content: '🔒';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.2rem;
        }

        .rarity-border {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            border-radius: 20px 20px 0 0;
        }

        .rarity-common .rarity-border { background: #87CEEB; }
        .rarity-uncommon .rarity-border { background: #32CD32; }
        .rarity-rare .rarity-border { background: #FF4500; }
        .rarity-epic .rarity-border { background: #A020F0; }
        .rarity-legendary .rarity-border { background: #FFD700; }

        .badge-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
            line-height: 1;
        }

        .badge-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .badge-description {
            opacity: 0.8;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .badge-rarity {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .rarity-common { background: rgba(135, 206, 235, 0.2); color: #87CEEB; }
        .rarity-uncommon { background: rgba(50, 205, 50, 0.2); color: #32CD32; }
        .rarity-rare { background: rgba(255, 69, 0, 0.2); color: #FF4500; }
        .rarity-epic { background: rgba(160, 32, 240, 0.2); color: #A020F0; }
        .rarity-legendary { background: rgba(255, 215, 0, 0.2); color: #FFD700; }

        .badge-benefits {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: left;
        }

        .badge-benefits h4 {
            margin-bottom: 10px;
            color: #4ECDC4;
            font-size: 0.9rem;
        }

        .benefit-item {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
            padding-left: 15px;
            position: relative;
        }

        .benefit-item::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #4ECDC4;
        }

        .badge-date {
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 10px;
        }

        .progress-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .progress-section h3 {
            margin-bottom: 20px;
            color: #4ECDC4;
        }

        .milestone-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.05);
        }

        .milestone-icon {
            font-size: 2rem;
            margin-right: 15px;
            width: 50px;
            text-align: center;
        }

        .milestone-info {
            flex: 1;
        }

        .milestone-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .milestone-description {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .milestone-progress {
            margin-left: auto;
            text-align: right;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 6px;
            width: 120px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ECDC4, #45B7D1);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .leaderboard {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .leaderboard h3 {
            margin-bottom: 20px;
            color: #FFD700;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .rank {
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 20px;
            min-width: 40px;
        }

        .rank.first { color: #FFD700; }
        .rank.second { color: #C0C0C0; }
        .rank.third { color: #CD7F32; }

        .user-info {
            flex: 1;
        }

        .badge-count {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .search-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 12px 20px;
            color: #E0E1DD;
            width: 300px;
            margin: 0 auto 30px;
            display: block;
            font-size: 1rem;
        }

        .search-box::placeholder {
            color: rgba(224, 225, 221, 0.5);
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        .error {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: #ff6b6b;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .badges-grid {
                grid-template-columns: 1fr;
            }
            
            .filters {
                justify-content: center;
            }
            
            .filter-btn {
                font-size: 0.8rem;
                padding: 8px 16px;
            }
            
            .search-box {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏆 Colección de Badges</h1>
            <p>Descubre, colecciona y presume tus logros</p>
        </div>

        <div class="collection-stats">
            <div class="stat-card">
                <div class="completion-ring">
                    <svg viewBox="0 0 120 120">
                        <circle class="bg-circle" cx="60" cy="60" r="54"></circle>
                        <circle class="progress-circle" cx="60" cy="60" r="54" 
                                stroke-dasharray="0 339.292" id="completion-circle"></circle>
                    </svg>
                    <div class="completion-percentage" id="completion-percentage">0%</div>
                </div>
                <div class="stat-label">Completado</div>
            </div>

            <div class="stat-card">
                <div class="stat-number" id="earned-count">0</div>
                <div class="stat-label">Badges Obtenidos</div>
            </div>

            <div class="stat-card">
                <div class="stat-number" id="total-count">0</div>
                <div class="stat-label">Badges Totales</div>
            </div>

            <div class="stat-card">
                <div class="stat-number" id="legendary-count">0</div>
                <div class="stat-label">Legendarios</div>
            </div>
        </div>

        <input type="text" class="search-box" placeholder="🔍 Buscar badges..." 
               id="search-input" oninput="filterBadges()">

        <div class="filters">
            <button class="filter-btn active" onclick="filterByCategory('all')">Todos</button>
            <button class="filter-btn" onclick="filterByCategory('earned')">Obtenidos</button>
            <button class="filter-btn" onclick="filterByCategory('locked')">Bloqueados</button>
            <button class="filter-btn" onclick="filterByCategory('level')">Niveles</button>
            <button class="filter-btn" onclick="filterByCategory('achievement')">Logros</button>
            <button class="filter-btn" onclick="filterByCategory('legendary')">Legendarios</button>
        </div>

        <div class="badges-grid" id="badges-grid">
            <div class="loading">Cargando colección de badges...</div>
        </div>

        <div class="progress-section">
            <h3>🎯 Próximos Objetivos</h3>
            <div id="milestones-container">
                <div class="loading">Cargando objetivos...</div>
            </div>
        </div>

        <div class="leaderboard">
            <h3>👑 Top Coleccionistas</h3>
            <div id="leaderboard-container">
                <div class="loading">Cargando ranking...</div>
            </div>
        </div>
    </div>

    <script>
        // Configuración
        const API_BASE = window.location.origin + '/api';
        let currentUser = null;
        let allBadges = [];
        let currentFilter = 'all';

        // Datos de badges predefinidos (hasta que esté completamente implementado)
        const badgeData = {
            level_badges: [
                // Badges de usuario
                { type: 'user_level', name: 'Primer Paso', description: 'Has comenzado tu viaje de aprendizaje', 
                  icon: '🌟', rarity: 'common', level: 'Aprendiz', earned: false },
                { type: 'user_level', name: 'Explorador Curioso', description: 'Demuestras curiosidad por aprender más', 
                  icon: '🧭', rarity: 'common', level: 'Explorador', earned: true, earnedDate: '2024-01-15' },
                { type: 'user_level', name: 'Mente Estratégica', description: 'Dominas las estrategias de aprendizaje', 
                  icon: '👑', rarity: 'uncommon', level: 'Estratega', earned: false },
                { type: 'user_level', name: 'Sabiduría Ancestral', description: 'Posees conocimiento profundo y experiencia', 
                  icon: '🦉', rarity: 'rare', level: 'Sabio', earned: false },
                { type: 'user_level', name: 'Gran Maestro', description: 'Has alcanzado la maestría absoluta', 
                  icon: '⭐', rarity: 'legendary', level: 'Gran Maestro', earned: false },

                // Badges de creador
                { type: 'creator_level', name: 'Semilla Creativa', description: 'Tus primeras creaciones están germinando', 
                  icon: '🌱', rarity: 'common', level: 'Semilla', earned: true, earnedDate: '2024-02-01' },
                { type: 'creator_level', name: 'Chispa de Inspiración', description: 'Tu creatividad comienza a brillar', 
                  icon: '✨', rarity: 'common', level: 'Chispa', earned: false },
                { type: 'creator_level', name: 'Arquitecto del Conocimiento', description: 'Construyes experiencias de aprendizaje sólidas', 
                  icon: '🏗️', rarity: 'uncommon', level: 'Constructor', earned: false },
                { type: 'creator_level', name: 'Voz Influyente', description: 'Tu mensaje llega a una audiencia amplia', 
                  icon: '📢', rarity: 'rare', level: 'Orador', earned: false },
                { type: 'creator_level', name: 'Visionario Digital', description: 'Lideras el futuro del aprendizaje', 
                  icon: '👁️', rarity: 'legendary', level: 'Visionario', earned: false },

                // Badges de profesor
                { type: 'teacher_level', name: 'Guía Sabio', description: 'Iluminas el camino del aprendizaje', 
                  icon: '🏮', rarity: 'common', level: 'Guía', earned: false },
                { type: 'teacher_level', name: 'Instructor Experto', description: 'Tu enseñanza marca la diferencia', 
                  icon: '📚', rarity: 'common', level: 'Instructor', earned: false },
                { type: 'teacher_level', name: 'Consejero de Sabiduría', description: 'Aconsejas con sabiduría y experiencia', 
                  icon: '⚖️', rarity: 'uncommon', level: 'Consejero', earned: false },
                { type: 'teacher_level', name: 'Erudito Académico', description: 'Tu conocimiento es vasto y profundo', 
                  icon: '📜', rarity: 'rare', level: 'Erudito', earned: false },
                { type: 'teacher_level', name: 'Maestro Jedi', description: 'Has alcanzado la maestría en la enseñanza', 
                  icon: '⚔️', rarity: 'legendary', level: 'Maestro Jedi', earned: false }
            ],
            achievement_badges: [
                { type: 'achievement', name: 'Perfeccionista', description: 'Alcanzaste 100% de consolidación en un bloque', 
                  icon: '💎', rarity: 'rare', earned: false, progress: 85 },
                { type: 'achievement', name: 'Maratonista', description: 'Completaste 10 bloques en un mes', 
                  icon: '🏃', rarity: 'uncommon', earned: true, earnedDate: '2024-01-28' },
                { type: 'achievement', name: 'Racha de Fuego', description: 'Mantuviste actividad diaria por 30 días', 
                  icon: '🔥', rarity: 'rare', earned: false, progress: 65 },
                { type: 'achievement', name: 'Mentor Comunitario', description: 'Ayudaste a 50 usuarios a subir de nivel', 
                  icon: '🤝', rarity: 'epic', earned: false, progress: 20 },
                { type: 'achievement', name: 'Innovador', description: 'Creaste contenido usado por más de 1000 usuarios', 
                  icon: '💡', rarity: 'epic', earned: false, progress: 45 },
                { type: 'achievement', name: 'Leyenda de PLAYTEST', description: 'Alcanzaste el nivel máximo en los tres tipos', 
                  icon: '👑', rarity: 'legendary', earned: false, progress: 10 }
            ]
        };

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });

        function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/login.html';
                return;
            }
            
            try {
                const payload = JSON.parse(atob(token.split('.')[1]));
                currentUser = payload;
                loadBadgeData();
            } catch (error) {
                console.error('Error decodificando token:', error);
                localStorage.removeItem('token');
                window.location.href = '/login.html';
            }
        }

        function loadBadgeData() {
            // Combinar todos los badges
            allBadges = [...badgeData.level_badges, ...badgeData.achievement_badges];
            
            updateStats();
            displayBadges();
            loadMilestones();
            loadLeaderboard();
        }

        function updateStats() {
            const earnedBadges = allBadges.filter(badge => badge.earned);
            const legendaryBadges = earnedBadges.filter(badge => badge.rarity === 'legendary');
            
            const completionPercentage = Math.round((earnedBadges.length / allBadges.length) * 100);
            
            document.getElementById('earned-count').textContent = earnedBadges.length;
            document.getElementById('total-count').textContent = allBadges.length;
            document.getElementById('legendary-count').textContent = legendaryBadges.length;
            document.getElementById('completion-percentage').textContent = completionPercentage + '%';
            
            // Actualizar círculo de progreso
            const circumference = 2 * Math.PI * 54;
            const progress = (completionPercentage / 100) * circumference;
            document.getElementById('completion-circle').style.strokeDasharray = `${progress} ${circumference}`;
        }

        function displayBadges() {
            const container = document.getElementById('badges-grid');
            let filteredBadges = allBadges;

            // Aplicar filtros
            if (currentFilter !== 'all') {
                filteredBadges = allBadges.filter(badge => {
                    switch (currentFilter) {
                        case 'earned': return badge.earned;
                        case 'locked': return !badge.earned;
                        case 'level': return badge.type.includes('level');
                        case 'achievement': return badge.type === 'achievement';
                        case 'legendary': return badge.rarity === 'legendary';
                        default: return true;
                    }
                });
            }

            // Aplicar búsqueda
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            if (searchTerm) {
                filteredBadges = filteredBadges.filter(badge => 
                    badge.name.toLowerCase().includes(searchTerm) ||
                    badge.description.toLowerCase().includes(searchTerm)
                );
            }

            let html = '';
            filteredBadges.forEach(badge => {
                html += createBadgeCard(badge);
            });

            if (!html) {
                html = '<div class="loading">No se encontraron badges con los filtros seleccionados</div>';
            }

            container.innerHTML = html;
        }

        function createBadgeCard(badge) {
            const earnedClass = badge.earned ? 'earned' : 'locked';
            const benefits = getBadgeBenefits(badge);
            
            return `
                <div class="badge-card ${earnedClass} rarity-${badge.rarity}">
                    <div class="rarity-border"></div>
                    <div class="badge-icon">${badge.icon}</div>
                    <div class="badge-name">${badge.name}</div>
                    <div class="badge-rarity rarity-${badge.rarity}">${badge.rarity}</div>
                    <div class="badge-description">${badge.description}</div>
                    
                    ${benefits ? `
                        <div class="badge-benefits">
                            <h4>🎁 Beneficios</h4>
                            ${benefits.map(benefit => `<div class="benefit-item">${benefit}</div>`).join('')}
                        </div>
                    ` : ''}
                    
                    ${badge.progress !== undefined && !badge.earned ? `
                        <div class="badge-benefits">
                            <h4>📊 Progreso</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${badge.progress}%"></div>
                            </div>
                            <div style="text-align: center; margin-top: 5px; font-size: 0.8rem;">
                                ${badge.progress}% completado
                            </div>
                        </div>
                    ` : ''}
                    
                    ${badge.earned && badge.earnedDate ? `
                        <div class="badge-date">Obtenido: ${new Date(badge.earnedDate).toLocaleDateString()}</div>
                    ` : ''}
                </div>
            `;
        }

        function getBadgeBenefits(badge) {
            const benefitsMap = {
                'Explorador Curioso': ['Acceso a pistas', '+5 puntos de exploración'],
                'Semilla Creativa': ['Herramientas básicas de creación', 'Acceso a la comunidad'],
                'Maratonista': ['+15 puntos de resistencia', 'Beneficios de maratón'],
                'Perfeccionista': ['+25 recompensas por perfección', '10 puntos de prestigio'],
                'Racha de Fuego': ['Multiplicador x1.5', '+5 recompensas diarias'],
            };
            
            return benefitsMap[badge.name] || null;
        }

        function loadMilestones() {
            const container = document.getElementById('milestones-container');
            
            const milestones = [
                { name: 'Siguiente Nivel', description: 'Alcanza el nivel Estratega', progress: 75, icon: '🎯' },
                { name: 'Primer Badge Raro', description: 'Obtén tu primer badge raro', progress: 40, icon: '💎' },
                { name: 'Creador Establecido', description: 'Llega a 100 usuarios activos', progress: 60, icon: '🚀' },
                { name: 'Mentor de la Comunidad', description: 'Ayuda a 25 usuarios más', progress: 50, icon: '🤝' }
            ];

            let html = '';
            milestones.forEach(milestone => {
                html += `
                    <div class="milestone-item">
                        <div class="milestone-icon">${milestone.icon}</div>
                        <div class="milestone-info">
                            <div class="milestone-name">${milestone.name}</div>
                            <div class="milestone-description">${milestone.description}</div>
                        </div>
                        <div class="milestone-progress">
                            <div>${milestone.progress}%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${milestone.progress}%"></div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function loadLeaderboard() {
            const container = document.getElementById('leaderboard-container');
            
            // Datos simulados del leaderboard
            const topCollectors = [
                { nickname: 'MaestroJedi', totalBadges: 18, legendaryBadges: 3, epicBadges: 5, rareBoost: 8 },
                { nickname: 'CodeMaster', totalBadges: 15, legendaryBadges: 2, epicBadges: 4, rareBoost: 6 },
                { nickname: 'LearningGuru', totalBadges: 13, legendaryBadges: 1, epicBadges: 3, rareBoost: 7 },
                { nickname: 'CreativeForce', totalBadges: 12, legendaryBadges: 1, epicBadges: 2, rareBoost: 5 },
                { nickname: 'KnowledgeSeeker', totalBadges: 11, legendaryBadges: 0, epicBadges: 3, rareBoost: 4 }
            ];

            let html = '';
            topCollectors.forEach((user, index) => {
                const rankClass = index === 0 ? 'first' : index === 1 ? 'second' : index === 2 ? 'third' : '';
                
                html += `
                    <div class="leaderboard-item">
                        <div class="rank ${rankClass}">#${index + 1}</div>
                        <div class="user-info">
                            <div><strong>${user.nickname}</strong></div>
                            <div class="badge-count">
                                <span>🏆 ${user.totalBadges} badges</span>
                                <span>⭐ ${user.legendaryBadges} legendarios</span>
                                <span>🔥 ${user.epicBadges} épicos</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function filterByCategory(category) {
            currentFilter = category;
            
            // Actualizar botones
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayBadges();
        }

        function filterBadges() {
            displayBadges();
        }
    </script>
</body>
</html>